âœ… App: init() - App instance created!
âœ… AppDelegate: init() - AppDelegate instance created!
âœ… App: appDelegate = <openai_transcriber_ios.AppDelegate: 0x30152c110>
âœ… AppDelegate: didFinishLaunchingWithOptions - AppDelegateãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸï¼
âœ… BackgroundSessionManager initialized
âœ… AppDelegate: BackgroundSessionManager = <openai_transcriber_ios.BackgroundSessionManager: 0x30027c600>
âœ… Loaded 10 history items from UserDefaults.
ğŸ—„ï¸ HistoryManager initialized. Documents Directory: /var/mobile/Containers/Data/Application/5482472C-556F-4D00-9909-19A403CF1FA8/Documents
âœ… App: ContentView appeared
âœ… App: AppDelegate instance = Optional(<SwiftUI.AppDelegate: 0x3019430f0>)

â• Started new history item: ID 6CECBE20-FA5B-4D79-A13B-CA1C50633C89
ğŸ—‘ï¸ Deleting old history item (due to new session): F45F1C73-4089-4E17-9E2F-50EA1DB22362
âœ… Saved 10 history items to UserDefaults.
Starting recorder

ğŸ™ï¸ Recording started in auto mode
ğŸ™ï¸ Input format: <AVAudioFormat 0x30344c550:  1 ch,  48000 Hz, Float32>
ğŸ™ï¸ Output format: Optional(<AVAudioFormat 0x303415900:  1 ch,  16000 Hz, Int16>)
ğŸ“ Debug log file will be written to: /private/var/mobile/Containers/Data/Application/5482472C-556F-4D00-9909-19A403CF1FA8/tmp/debug_log.txt
ğŸ›  ğŸ›ï¸ Audio Settings - Threshold: 0.010000001, Window: 0.5s, MinDuration: 0.5s
ğŸ“ Created new audio file: A0F080B6-E3FA-4C20-B907-4C234854B95C.wav
ğŸ“ Format: <AVAudioFormat 0x303415900:  1 ch,  16000 Hz, Int16>

ğŸ›  âœ… finish tapped
ğŸ“Š Segment finalized: A0F080B6-E3FA-4C20-B907-4C234854B95C.wav, size: 519296 bytes, duration: 16.46s
âœ… Audio file valid: duration=16.1s
âš ï¸ Update skipped: No data to save for ID 6CECBE20-FA5B-4D79-A13B-CA1C50633C89
ğŸ§ Segment file path: /private/var/mobile/Containers/Data/Application/5482472C-556F-4D00-9909-19A403CF1FA8/tmp/A0F080B6-E3FA-4C20-B907-4C234854B95C.wav
ğŸ›  WhisperQueue â–¶ï¸ Enqueuing background task for: A0F080B6-E3FA-4C20-B907-4C234854B95C.wav
ğŸ›  ğŸ”µ Wrote form data to temporary file: /private/var/mobile/Containers/Data/Application/5482472C-556F-4D00-9909-19A403CF1FA8/tmp/upload_9718E201-1C40-43C5-B0CE-0B402DD7AE62.formdata
ğŸ”µ [1] Registering task metadata.
ğŸ›  ğŸ”µ [1] Starting background upload task for A0F080B6-E3FA-4C20-B907-4C234854B95C.wav

ğŸ”µ [1] Received data chunk: 194 bytes
ğŸ”µ [1] Task Completed.
âœ… [1] Success: ã“ã®ã¾ã¾ã®çŠ¶æ…‹ã§ã€ã‚³ãƒ¡ãƒ³ãƒˆãŒå¤§è’ã‚Œã—ãŸã“ã¨ã‚‚ã‚ã‚‹ ãˆãƒ¼! ã»ã‚“ã¨ã«ã€500äººãã‚‰ã„ã®äººãŒãšãƒ¼ã£ã¨è¨€ã„åˆã„ã‚’ã™ã‚‹ ãˆãƒ¼! ã“ã¨ã‚‚ã‚ã‚‹ã»ã©
ğŸ—‘ï¸ [1] Deleting temp file: /private/var/mobile/Containers/Data/Application/5482472C-556F-4D00-9909-19A403CF1FA8/tmp/upload_9718E201-1C40-43C5-B0CE-0B402DD7AE62.formdata

âœ… Saved full audio to: \(destinationFullAudioURL.path)
âœ… Saved 10 history items to UserDefaults.
ğŸ“ Updated history item: ID 6CECBE20-FA5B-4D79-A13B-CA1C50633C89
âš ï¸ Segment file not found in Documents: segment_D06ED6FF-AA9A-4C95-9C67-C95764986C46_630974A3-276E-4E22-A9CA-76DBA43881F5.wav
ğŸ›  ğŸ”„ resetPlayer called with URL: nil
ğŸ›  ğŸ—‘ï¸ No URL provided, clearing player

ğŸ“Š Token calculation:
  - Original: 204æ–‡å­—
  - Compressed (70%): 142æ–‡å­—
  - Output tokens: 71
  - Total allocated: 4000

ğŸ“ Gemini API Request - Max Output Tokens: 4000

ğŸ“ Gemini API Response: {
  "candidates": [
    {
      "content": {
        "role": "model"
      },
      "finishReason": "MAX_TOKENS",
      "index": 0
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 641,
    "totalTokenCount": 4640,
    "promptTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 641
      }
    ],
    "thoughtsTokenCount": 3999
  },
  "modelVersion": "models/gemini-2.5-pro-preview-05-06",
  "responseId": "D_46aLD5Kvutz7IP-4-MEQ"
}
...
ğŸ“Š Token Usage - Prompt: 641, Total: 4640, Thoughts: 3999
âŒ Decoding error: Error Domain=GeminiClient Code=4 "å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚" UserInfo={NSLocalizedDescription=å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚}
âŒ Summary generation error: Error Domain=GeminiClient Code=4 "å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚" UserInfo={NSLocalizedDescription=å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚}

ğŸ“Š Token calculation:
  - Original: 204æ–‡å­—
  - Compressed (30%): 61æ–‡å­—
  - Output tokens: 30
  - Total allocated: 6000

ğŸ“ Gemini API Request - Max Output Tokens: 6000

ğŸ“ Gemini API Response: {
  "candidates": [
    {
      "content": {
        "role": "model"
      },
      "finishReason": "MAX_TOKENS",
      "index": 0
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 641,
    "totalTokenCount": 6640,
    "promptTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 641
      }
    ],
    "thoughtsTokenCount": 5999
  },
  "modelVersion": "models/gemini-2.5-pro-preview-05-06",
  "responseId": "hv46aI_dJMGez7IP_ua62AI"
}
...
ğŸ“Š Token Usage - Prompt: 641, Total: 6640, Thoughts: 5999
âŒ Decoding error: Error Domain=GeminiClient Code=4 "å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚" UserInfo={NSLocalizedDescription=å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚}
âŒ Summary generation error: Error Domain=GeminiClient Code=4 "å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚" UserInfo={NSLocalizedDescription=å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚}

ğŸ“Š Token calculation:
  - Original: 204æ–‡å­—
  - Compressed (20%): 40æ–‡å­—
  - Output tokens: 20
  - Total allocated: 6000

ğŸ“ Gemini API Request - Max Output Tokens: 6000

ğŸ“ Gemini API Response: {
  "candidates": [
    {
      "content": {
        "role": "model"
      },
      "finishReason": "MAX_TOKENS",
      "index": 0
    }
  ],
  "usageMetadata": {
    "promptTokenCount": 641,
    "totalTokenCount": 6640,
    "promptTokensDetails": [
      {
        "modality": "TEXT",
        "tokenCount": 641
      }
    ],
    "thoughtsTokenCount": 5999
  },
  "modelVersion": "models/gemini-2.5-pro-preview-05-06",
  "responseId": "C_86aMCuH-XzqtsP-Yns6AQ"
}
...
ğŸ“Š Token Usage - Prompt: 641, Total: 6640, Thoughts: 5999
âŒ Decoding error: Error Domain=GeminiClient Code=4 "å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚" UserInfo={NSLocalizedDescription=å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚}
âŒ Summary generation error: Error Domain=GeminiClient Code=4 "å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚" UserInfo={NSLocalizedDescription=å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ã«é”ã—ã¾ã—ãŸã€‚è¦ç´„ãƒ¬ãƒ™ãƒ«ã‚’ã€è»½ã„è¦ç´„ã€ã«å¤‰æ›´ã™ã‚‹ã‹ã€è¨­å®šã§æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚}

#FactoryInstall Unable to query results, error: 5
